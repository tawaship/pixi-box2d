/*!
 * pixi-box2d - v1.0.0
 * 
 * @require pixi.js v^5.3.3
 * @require Box2d.js
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
this.PIXI=this.PIXI||{},function(t,e,o){"use strict";var i=o.Common.Math.b2Vec2,a=o.Dynamics.b2DebugDraw,r=o.Dynamics.b2World,n=(o.Dynamics.Contacts.b2Contact,o.Dynamics.b2ContactListener),s=o.Dynamics.b2BodyDef,d=o.Dynamics.b2FixtureDef,c=o.Dynamics.b2Body,y=o.Collision.Shapes.b2CircleShape,b=o.Collision.Shapes.b2PolygonShape,l=(o.Collision.Shapes.b2EdgeShape,1/30);function p(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("BeginContact",o),o&&o.emit&&o.emit("BeginContact",e)}function u(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("EndContact",o),o&&o.emit&&o.emit("EndContact",e)}function h(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("PreSolve",o),o&&o.emit&&o.emit("PreSolve",e)}function f(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("PostSolve",o),o&&o.emit&&o.emit("PostSolve",e)}var D=function(t){function e(e){var o=this;t.call(this);var a="number"==typeof e.gravityX?e.gravityX:0,s="number"==typeof e.gravityY?e.gravityY:9.8,d=!!e.allowSleep,c=new r(new i(a,s),d);this._box2dData={world:c,listener:new n,enabled:!0,speed:1,targets:{},deletes:{}},this.on("added",(function(){e.ticker.add(o._handleTick,o)})),this.on("removed",(function(){e.ticker.remove(o._handleTick,o)}));var y=this._box2dData.listener;e.listenBeginContact&&(y.BeginContact=p),e.listenEndContact&&(y.EndContact=u),e.listenPreSolve&&(y.PreSolve=h),e.listenPostSolve&&(y.PostSolve=f),c.SetContactListener(y),this.box2dEnabled=!0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={speed:{configurable:!0},box2dEnabled:{configurable:!0},world:{configurable:!0}};return e.prototype.addDebugDraw=function(t){var e=document.createElement("canvas"),o=e.getContext("2d");if(!o)return e;t.parentNode&&t.parentNode.appendChild(e),e.width=t.width,e.height=t.height,e.style.width=t.style.width,e.style.height=t.style.height,e.style.top=t.style.top||"0",e.style.left=t.style.left||"0",e.style.position="absolute",e.style.pointerEvents="none",e.style.zIndex="100";var i=new a;return i.SetSprite(o),i.SetDrawScale(30),i.SetFillAlpha(.5),i.SetLineThickness(1),i.SetFlags(a.e_shapeBit|a.e_jointBit),this.world.SetDebugDraw(i),e},e.prototype._handleTick=function(t){if(this._box2dData.enabled){var e=this._box2dData.world;e.Step(t*this._box2dData.speed/30,10,10),e.ClearForces(),e.DrawDebugData();var o=this._box2dData.targets;for(var i in this._box2dData.deletes){var a=this._box2dData.deletes[i];delete o[i],a.body&&(e.DestroyBody(a.body),a.body=null)}for(var r in this._box2dData.deletes=[],o){var n=o[r];if(n.body){var s=n.body.GetPosition();n.x=30*s.x,n.y=30*s.y,n.rotation=n.body.GetAngle()}}}},o.speed.get=function(){return this._box2dData.speed},o.speed.set=function(t){this._box2dData.speed=t},o.box2dEnabled.get=function(){return this._box2dData.enabled},o.box2dEnabled.set=function(t){this._box2dData.enabled=t},o.world.get=function(){return this._box2dData.world},e.prototype.addBox2d=function(t){if(!t.body){for(var e=this._box2dData.world.CreateBody(t.getBodyDef()),o=t.getFixtureDefs(),a=0;a<o.length;a++)e.CreateFixture(o[a]);t.body=e,e.SetPosition(new i(t.x*l,t.y*l)),e.SetAngle(t.rotation)}return t.reflect(),this.addChild(t),this._box2dData.targets[t.box2dID]=t,delete this._box2dData.deletes[t.box2dID],t},e.prototype.removeBox2d=function(t){return this.removeChild(t),this._box2dData.deletes[t.box2dID]=t,t},Object.defineProperties(e.prototype,o),e}(e.Container);function x(t){void 0===t&&(t=!1);var e=new s;return t?e.type=c.b2_dynamicBody:c.b2_staticBody,e}var _=x(!0),v=x(!1);function m(t,e){void 0===t&&(t={});var o=new d;return o.density="number"==typeof t.density?t.density:o.density,o.friction="number"==typeof t.friction?t.friction:o.friction,o.restitution="number"==typeof t.restitution?t.restitution:o.restitution,o.filter.categoryBits="number"==typeof t.categoryBits?t.categoryBits:o.filter.categoryBits,o.filter.maskBits="number"==typeof t.maskBits?t.maskBits:o.filter.maskBits,o.isSensor=!!t.isSensor,o.userData=e,o}var g=function(t){function e(o){void 0===o&&(o={}),t.call(this),this._box2dData={id:e._id++,body:null,bodyDef:o.isStatic?v:_,fixtureDefs:[m(o,this)],maskBits:65535}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={box2dID:{configurable:!0},body:{configurable:!0}};return e.prototype.BeginContact=function(t){},e.prototype.EndContact=function(t){},e.prototype.PreSolve=function(t){},e.prototype.PostSolve=function(t){},e.prototype.getBodyDef=function(){return this._box2dData.bodyDef},e.prototype.getFixtureDefs=function(){return this._box2dData.fixtureDefs},o.box2dID.get=function(){return this._box2dData.id},o.body.get=function(){return this._box2dData.body},o.body.set=function(t){this._box2dData.body=t},e.prototype.setX=function(t){this.x=t;var e=this._box2dData.body;if(e){var o=e.GetPosition();o.x=t*l,e.SetPosition(o)}},e.prototype.setY=function(t){this.y=t;var e=this._box2dData.body;if(e){var o=e.GetPosition();o.y=t*l,e.SetPosition(o)}},e.prototype.setRotation=function(t){this.rotation=t;var e=this._box2dData.body;e&&e.SetAngle(t)},e.prototype.reflect=function(){this.setX(this.x),this.setY(this.y),this.setRotation(this.rotation),this.addMask(this._box2dData.maskBits)},e.prototype.addMask=function(t){if(this._box2dData.maskBits|=t,this._box2dData.body)for(var e=this._box2dData.body.GetFixtureList();e;){var o=e.GetFilterData();o.maskBits=this._box2dData.maskBits,e.SetFilterData(o),e=e.GetNext()}},e.prototype.addAllMask=function(){if(this._box2dData.maskBits=65535,this._box2dData.body)for(var t=this._box2dData.body.GetFixtureList();t;){var e=t.GetFilterData();e.maskBits=65535,t.SetFilterData(e),t=t.GetNext()}},e.prototype.removeMask=function(t){if(this._box2dData.maskBits^=this._box2dData.maskBits&t,this._box2dData.body)for(var e=this._box2dData.body.GetFixtureList();e;){var o=e.GetFilterData();o.maskBits=this._box2dData.maskBits,e.SetFilterData(o),e=e.GetNext()}},e.prototype.removeAllMask=function(){if(this._box2dData.maskBits=0,this._box2dData.body)for(var t=this._box2dData.body.GetFixtureList();t;){var e=t.GetFilterData();e.maskBits=0,t.SetFilterData(e),t=t.GetNext()}},e.prototype.toDynamic=function(){this._box2dData.body&&this._box2dData.body.SetType(c.b2_dynamicBody)},e.prototype.toStatic=function(){this._box2dData.body&&this._box2dData.body.SetType(c.b2_staticBody)},Object.defineProperties(e.prototype,o),e}(e.Container);g._id=0,delete g.prototype.BeginContact,delete g.prototype.EndContact,delete g.prototype.PreSolve,delete g.prototype.PostSolve;var B=function(t){function o(e,o){void 0===o&&(o={}),t.call(this,o),this.getFixtureDefs()[0].shape=new y(e*l)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.from=function(t,i){void 0===i&&(i={});var a=new o(Math.max(t.width/2,t.height/2),i),r=a.addChild(new e.Container);r.addChild(t);var n=a.getLocalBounds();return r.x=-n.x-t.width/2,r.y=-n.y-t.height/2,a},o}(g),S=function(t){function o(e,o,a){void 0===a&&(a={}),t.call(this,a),e*=l,o*=l;var r=this.getFixtureDefs()[0],n=new b;n.SetAsArray([new i(0,0),new i(e,0),new i(e,o),new i(0,o)]),r.shape=n}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.from=function(t,i){void 0===i&&(i={});var a=new o(t.width,t.height,i),r=a.addChild(new e.Container);r.addChild(t);var n=a.getLocalBounds();return r.x=-n.x,r.y=-n.y,a},o}(g),w=function(t){function e(e,o){void 0===o&&(o={}),t.call(this,o);var i=this.getFixtureDefs()[0],a=new b;a.SetAsArray(e),i.shape=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g),C=function(t){function e(e,o){void 0===o&&(o={}),t.call(this,o);var a=this.getFixtureDefs()[0],r=new b;r.SetAsEdge(new i(0,0),new i(e.x*l,e.y*l)),a.shape=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g);Object.keys(o).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})),t.Box2dObject=g,t.Circle=B,t.Edge=C,t.Polygon=w,t.Rectangle=S,t.WorldContainer=D}(this.PIXI.box2d=this.PIXI.box2d||{},PIXI,Box2D);//# sourceMappingURL=pixi-box2d.min.js.map
