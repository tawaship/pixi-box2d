{"version":3,"file":"pixi-box2d.cjs.js","sources":["../src/modules/Box2dAlias.ts","../src/modules/utils.ts","../src/modules/WorldContainer.ts","../src/modules/Box2dObject.ts","../src/modules/Circle.ts","../src/modules/Rectangle.ts","../src/modules/Polygon.ts","../src/modules/Edge.ts"],"sourcesContent":["import { Dynamics, Collision, Common } from '@tawaship/box2dweb-module';\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Vec2 = Common.Math.b2Vec2; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import DebugDraw = Dynamics.b2DebugDraw; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import World = Dynamics.b2World; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Contact = Dynamics.Contacts.b2Contact; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ContactListener = Dynamics.b2ContactListener; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import BodyDef = Dynamics.b2BodyDef; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import FixtureDef = Dynamics.b2FixtureDef; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Body = Dynamics.b2Body; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import CircleShape = Collision.Shapes.b2CircleShape; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import PolygonShape = Collision.Shapes.b2PolygonShape; // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import EdgeShape = Collision.Shapes.b2EdgeShape; // eslint-disable-line @typescript-eslint/no-unused-vars","/**\r\n * @ignore\r\n */\r\nexport const Box2dToPixi = 30;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport const PixiToBox2d = 1 / Box2dToPixi;","import { Container, Ticker } from 'pixi.js';\r\nimport { Vec2, World, Contact, ContactListener, DebugDraw } from './Box2dAlias';\r\nimport { Box2dObject } from './Box2dObject';\r\nimport { Box2dToPixi, PixiToBox2d } from './utils';\r\n\r\nexport interface IWorldContainerData {\r\n\tworld: World;\r\n\tlistener: ContactListener;\r\n\tenabled: boolean;\r\n\tspeed: number;\r\n\ttargets: { [id: number]: Box2dObject };\r\n\tdeletes: { [id: number]: Box2dObject };\r\n\tdisplayOffsetX: number;\r\n\tdisplayOffsetY: number;\r\n\tdisplayAngle: number;\r\n\tperspectiveRatio: number;\r\n\tisDisplayNegative: boolean;\r\n}\r\n\r\nexport interface IWorldContainerOption {\r\n\tticker: Ticker;\r\n\tgravityX?: number;\r\n\tgravityY?: number;\r\n\tallowSleep?: boolean;\r\n\tlistenBeginContact?: boolean;\r\n\tlistenEndContact?: boolean;\r\n\tlistenPreSolve?: boolean;\r\n\tlistenPostSolve?: boolean;\r\n\tdisplayOffsetX?: number;\r\n\tdisplayOffsetY?: number;\r\n\tdisplayAngle?: number;\r\n\tperspectiveRatio?: number;\r\n\tisDisplayNegative?: boolean;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction beginContactHandler(contact: Contact) {\r\n\tconst dataA = contact.GetFixtureA().GetUserData();\r\n\tconst dataB = contact.GetFixtureB().GetUserData();\r\n\t\r\n\tdataA && dataA.emit && dataA.emit('BeginContact', dataB);\r\n\tdataB && dataB.emit && dataB.emit('BeginContact', dataA);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction endContactHandler(contact: Contact) {\r\n\tconst dataA = contact.GetFixtureA().GetUserData();\r\n\tconst dataB = contact.GetFixtureB().GetUserData();\r\n\t\r\n\tdataA && dataA.emit && dataA.emit('EndContact', dataB);\r\n\tdataB && dataB.emit && dataB.emit('EndContact', dataA);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction preSolveHandler(contact: Contact) {\r\n\tconst dataA = contact.GetFixtureA().GetUserData();\r\n\tconst dataB = contact.GetFixtureB().GetUserData();\r\n\t\r\n\tdataA && dataA.emit && dataA.emit('PreSolve', dataB);\r\n\tdataB && dataB.emit && dataB.emit('PreSolve', dataA);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction postSolveHandler(contact: Contact) {\r\n\tconst dataA = contact.GetFixtureA().GetUserData();\r\n\tconst dataB = contact.GetFixtureB().GetUserData();\r\n\t\r\n\tdataA && dataA.emit && dataA.emit('PostSolve', dataB);\r\n\tdataB && dataB.emit && dataB.emit('PostSolve', dataA);\r\n}\r\n\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n */\r\nexport class WorldContainer extends Container {\r\n\tprivate _box2dData: IWorldContainerData;\r\n\t\r\n\tconstructor(options: IWorldContainerOption) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tconst gravityX = typeof(options.gravityX) === 'number' ? options.gravityX : 0;\r\n\t\tconst gravityY = typeof(options.gravityY) === 'number' ? options.gravityY : 9.8;\r\n\t\tconst allowSleep = !!options.allowSleep;\r\n\t\t\r\n\t\tconst world = new World(new Vec2(gravityX, gravityY), allowSleep);\r\n\t\t\r\n\t\tthis._box2dData = {\r\n\t\t\tworld,\r\n\t\t\tlistener: new ContactListener(),\r\n\t\t\tenabled: true,\r\n\t\t\tspeed: 1,\r\n\t\t\ttargets: {},\r\n\t\t\tdeletes: {},\r\n\t\t\tdisplayOffsetX: options.displayOffsetX || 0,\r\n\t\t\tdisplayOffsetY: options.displayOffsetY || 0,\r\n\t\t\tdisplayAngle: options.displayAngle || 0,\r\n\t\t\tperspectiveRatio: options.perspectiveRatio || 1000,\r\n\t\t\tisDisplayNegative: options.isDisplayNegative || false\r\n\t\t};\r\n\t\t\r\n\t\tthis.on('added', () => {\r\n\t\t\toptions.ticker.add(this._handleTick, this);\r\n\t\t});\r\n\t\t\r\n\t\tthis.on('removed', () => {\r\n\t\t\toptions.ticker.remove(this._handleTick, this);\r\n\t\t});\r\n\t\t\r\n\t\tconst listener = this._box2dData.listener;\r\n\t\tif (options.listenBeginContact) {\r\n\t\t\tlistener.BeginContact = beginContactHandler;\r\n\t\t}\r\n\t\t\r\n\t\tif (options.listenEndContact) {\r\n\t\t\tlistener.EndContact = endContactHandler;\r\n\t\t}\r\n\t\t\r\n\t\tif (options.listenPreSolve) {\r\n\t\t\tlistener.PreSolve = preSolveHandler;\r\n\t\t}\r\n\t\t\r\n\t\tif (options.listenPostSolve) {\r\n\t\t\tlistener.PostSolve = postSolveHandler;\r\n\t\t}\r\n\t\t\r\n\t\tworld.SetContactListener(listener);\r\n\t\t\r\n\t\tthis.box2dEnabled = true\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param canvas The canvas element on which the content is drawn.\r\n\t * @return Canvas element for debug display.\r\n\t */\r\n\taddDebugDraw( pixiCanvas: HTMLCanvasElement): HTMLCanvasElement {\r\n\t\tconst canvas = document.createElement('canvas');\r\n\t\t\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\t\tif (!ctx) {\r\n\t\t\treturn canvas;\r\n\t\t}\r\n\t\t\r\n\t\tcanvas.width = pixiCanvas.width;\r\n\t\tcanvas.height = pixiCanvas.height;\r\n\t\tcanvas.style.width = pixiCanvas.style.width;\r\n\t\tcanvas.style.height = pixiCanvas.style.height;\r\n\t\tcanvas.style.top = pixiCanvas.style.top || '0';\r\n\t\tcanvas.style.left = pixiCanvas.style.left || '0';\r\n\t\tcanvas.style.position = 'absolute';\r\n\t\tcanvas.style.pointerEvents = 'none';\r\n\t\tcanvas.style.zIndex = '100';\r\n\t\t\r\n\t\tconst debugDraw = new DebugDraw();\r\n\t\tdebugDraw.SetSprite(ctx);\r\n\t\tdebugDraw.SetDrawScale(Box2dToPixi);\r\n\t\tdebugDraw.SetFillAlpha(0.5);\r\n\t\tdebugDraw.SetLineThickness(1);\r\n\t\tdebugDraw.SetFlags(DebugDraw.e_shapeBit | DebugDraw.e_jointBit);\r\n\t\t\r\n\t\tthis.world.SetDebugDraw(debugDraw);\r\n\t\t\r\n\t\treturn canvas;\r\n\t}\r\n\t\r\n\tprivate _handleTick(delta: number) {\r\n\t\tif (!this._box2dData.enabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst world = this._box2dData.world;\r\n\t\t\r\n\t\tworld.Step(delta * this._box2dData.speed / 30, 10, 10);\r\n\t\tworld.ClearForces();\r\n\t\tworld.DrawDebugData();\r\n\t\t\r\n\t\tconst targets = this._box2dData.targets;\r\n\t\t\r\n\t\tfor (const i in this._box2dData.deletes) {\r\n\t\t\tconst b2d = this._box2dData.deletes[i];\r\n\t\t\tdelete(targets[i]);\r\n\t\t\tif (b2d.body) {\r\n\t\t\t\tworld.DestroyBody(b2d.body);\r\n\t\t\t\tb2d.body = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._box2dData.deletes = [];\r\n\t\tthis.reflect();\r\n\t}\r\n\t\r\n\treflect(): void {\r\n\t\tconst targets = this._box2dData.targets;\r\n\t\t\r\n\t\tconst displayOffsetX = this._box2dData.displayOffsetX;\r\n\t\tconst displayOffsetY = this._box2dData.displayOffsetY;\r\n\t\tconst displayAngle = this._box2dData.displayAngle;\r\n\t\t\r\n\t\tif (displayAngle === 0) {\r\n\t\t\tfor (const i in targets) {\r\n\t\t\t\tconst b2d = targets[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!b2d.body) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst position = b2d.body.GetPosition();\r\n\t\t\t\t\r\n\t\t\t\tb2d.y = position.y * Box2dToPixi - displayOffsetY;\r\n\t\t\t\tb2d.x = (position.x * Box2dToPixi - displayOffsetX);\r\n\t\t\t\tb2d.rotation = b2d.body.GetAngle();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst isDisplayNegative = this._box2dData.isDisplayNegative;\r\n\t\t\tconst ratio = this._box2dData.perspectiveRatio * displayAngle;\r\n\t\t\t\r\n\t\t\tfor (const i in targets) {\r\n\t\t\t\tconst b2d = targets[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!b2d.body) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst position = b2d.body.GetPosition();\r\n\t\t\t\t\r\n\t\t\t\tb2d.y = position.y * Box2dToPixi - displayOffsetY;\r\n\t\t\t\tconst s = 1 + b2d.y * displayAngle;\r\n\t\t\t\t\r\n\t\t\t\tif (!isDisplayNegative && s < 0) {\r\n\t\t\t\t\tb2d.renderable = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb2d.visible = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tb2d.scale.set(s);\r\n\t\t\t\tb2d.x = (position.x * Box2dToPixi - displayOffsetX) * s;\r\n\t\t\t\tb2d.y *= s / ratio;\r\n\t\t\t\tb2d.rotation = b2d.body.GetAngle();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst children = this.removeChildren();\r\n\t\t\tconst n = children.sort((a, b) => {\r\n\t\t\t\tif (a.y === b.y) {\r\n\t\t\t\t\treturn Math.abs(a.x) - Math.abs(b.x);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn a.y - b.y;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.addChild(...n);\r\n\t\t}\r\n\t}\r\n\t\r\n\tget speed(): number {\r\n\t\treturn this._box2dData.speed;\r\n\t}\r\n\t\r\n\tset speed(speed: number) {\r\n\t\tthis._box2dData.speed = speed;\r\n\t}\r\n\t\r\n\tget box2dEnabled(): boolean {\r\n\t\treturn this._box2dData.enabled;\r\n\t}\r\n\t\r\n\tset box2dEnabled(flag: boolean) {\r\n\t\tthis._box2dData.enabled = flag;\r\n\t}\r\n\t\r\n\tget world(): World {\r\n\t\treturn this._box2dData.world;\r\n\t}\r\n\t\r\n\taddBox2d(b2d: Box2dObject): Box2dObject {\r\n\t\tif (!b2d.body) {\r\n\t\t\tconst body = this._box2dData.world.CreateBody(b2d.getBodyDef());\r\n\t\t\tconst fixtureDefs = b2d.getFixtureDefs();\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < fixtureDefs.length; i++) {\r\n\t\t\t\tbody.CreateFixture(fixtureDefs[i]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tb2d.body = body;\r\n\t\t\t\r\n\t\t\tbody.SetPosition(new Vec2(b2d.x * PixiToBox2d, b2d.y * PixiToBox2d));\r\n\t\t\tbody.SetAngle(b2d.rotation);\r\n\t\t}\r\n\t\t\r\n\t\tb2d.reflect();\r\n\t\tthis.addChild(b2d);\r\n\t\tthis._box2dData.targets[b2d.box2dID] = b2d;\r\n\t\tdelete(this._box2dData.deletes[b2d.box2dID]);\r\n\t\t\r\n\t\treturn b2d;\r\n\t}\r\n\t\r\n\tremoveBox2d(b2d: Box2dObject): Box2dObject {\r\n\t\tthis.removeChild(b2d);\r\n\t\tthis._box2dData.deletes[b2d.box2dID] = b2d;\r\n\t\t\r\n\t\treturn b2d;\r\n\t}\r\n\t\r\n\tget displayOffsetX(): number {\r\n\t\treturn this._box2dData.displayOffsetX;\r\n\t}\r\n\t\r\n\tset displayOffsetX(displayOffsetX: number) {\r\n\t\tthis._box2dData.displayOffsetX = displayOffsetX;\r\n\t}\r\n\t\r\n\tget displayOffsetY(): number {\r\n\t\treturn this._box2dData.displayOffsetY;\r\n\t}\r\n\t\r\n\tset displayOffsetY(displayOffsetY: number) {\r\n\t\tthis._box2dData.displayOffsetY = displayOffsetY;\r\n\t}\r\n\t\r\n\tget displayAngle(): number {\r\n\t\treturn this._box2dData.displayAngle;\r\n\t}\r\n\t\r\n\tset displayAngle(displayAngle: number) {\r\n\t\tthis._box2dData.displayAngle = displayAngle;\r\n\t}\r\n}","import { Container } from 'pixi.js';\r\nimport { BodyDef, FixtureDef, Body } from './Box2dAlias';\r\nimport { PixiToBox2d } from './utils';\r\n\r\nexport interface IBox2dObjectOption {\r\n\tdensity?: number;\r\n\tfriction?: number;\r\n\trestitution?: number;\r\n\tisStatic?: boolean\r\n\t\r\n\t/**\r\n\t * The logical sum of the bits representing the collision detection category to which it belongs.\r\n\t */\r\n\tcategoryBits?: number;\r\n\t\r\n\t/**\r\n\t * The logical sum of the \"categoryBits\" for which collision detection with itself is performed.\r\n\t */\r\n\tmaskBits?: number;\r\n\t\r\n\t/**\r\n\t * Whether it is a sensor that judges only the overlap of coordinates.\r\n\t */\r\n\tisSensor?: boolean;\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\ntype TBox2dObjectBody = Body | null;\r\n\r\nexport interface IBox2dObjectData {\r\n\tid: number;\r\n\tbody: TBox2dObjectBody;\r\n\tbodyDef: BodyDef;\r\n\tfixtureDefs: FixtureDef[];\r\n\tmaskBits: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createBodyDef(isDynamic = false) {\r\n\tconst bodyDef = new BodyDef();\r\n\tisDynamic ? bodyDef.type = Body.b2_dynamicBody : Body.b2_staticBody;\r\n\t\r\n\treturn bodyDef;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst dynamicBodyDef: BodyDef = createBodyDef(true);\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst staticBodyDef: BodyDef = createBodyDef(false);\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createFixtureDef(options: IBox2dObjectOption = {}, pixi: Container) {\r\n\tconst fixtureDef = new FixtureDef();\r\n\t\r\n\tfixtureDef.density = typeof(options.density) === 'number' ? options.density : fixtureDef.density;\r\n\tfixtureDef.friction = typeof(options.friction) === 'number' ? options.friction : fixtureDef.friction;\r\n\tfixtureDef.restitution = typeof(options.restitution) === 'number' ? options.restitution : fixtureDef.restitution;\r\n\tfixtureDef.filter.categoryBits = typeof(options.categoryBits) === 'number' ? options.categoryBits : fixtureDef.filter.categoryBits;\r\n\tfixtureDef.filter.maskBits = typeof(options.maskBits) === 'number' ? options.maskBits : fixtureDef.filter.maskBits;\r\n\tfixtureDef.isSensor = !!options.isSensor;\r\n\tfixtureDef.userData = pixi;\r\n\t\r\n\treturn fixtureDef;\r\n}\r\n\r\n/**\r\n * @see http://pixijs.download/release/docs/PIXI.Container.html\r\n */\r\nexport class Box2dObject extends Container {\r\n\tprotected _box2dData: IBox2dObjectData;\r\n\tprivate static _id = 0;\r\n\t\r\n\t/**\r\n\t * When objects come into contact with each other.\r\n\t * @event\r\n\t * @param opponent The object to collide with.\r\n\t */\r\n\tBeginContact?(opponent: Box2dObject): void {} // eslint-disable-line\r\n\t\r\n\t/**\r\n\t * When objects are separated from each other.\r\n\t * @event\r\n\t * @param opponent The object to collide with.\r\n\t */\r\n\tEndContact?(opponent: Box2dObject): void {} // eslint-disable-line\r\n\t\r\n\t/**\r\n\t * Immediately before performing contact processing between objects.<br />\r\n\t * It will not fire if at least one is \"isSensor = true\".\r\n\t * @event\r\n\t * @param opponent The object to collide with.\r\n\t */\r\n\tPreSolve?(opponent: Box2dObject): void {} // eslint-disable-line\r\n\t\r\n\t/**\r\n\t * Immediately after performing contact processing between objects.<br />\r\n\t * It will not fire if at least one is \"isSensor = true\".\r\n\t * @event\r\n\t * @param opponent The object to collide with.\r\n\t */\r\n\tPostSolve?(opponent: Box2dObject): void {} // eslint-disable-line\r\n\t\r\n\tconstructor(options: IBox2dObjectOption = {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tconst fixtureDef = createFixtureDef(options, this);\r\n\t\tthis._box2dData = {\r\n\t\t\tid: Box2dObject._id++,\r\n\t\t\tbody: null,\r\n\t\t\tbodyDef: options.isStatic ? staticBodyDef : dynamicBodyDef,\r\n\t\t\tfixtureDefs: [fixtureDef],\r\n\t\t\tmaskBits: fixtureDef.filter.maskBits\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetBodyDef(): BodyDef {\r\n\t\treturn this._box2dData.bodyDef;\r\n\t}\r\n\t\r\n\tgetFixtureDefs(): FixtureDef[] {\r\n\t\treturn this._box2dData.fixtureDefs;\r\n\t}\r\n\t\r\n\tget box2dID(): number {\r\n\t\treturn this._box2dData.id;\r\n\t}\r\n\t\r\n\tget body(): TBox2dObjectBody {\r\n\t\treturn this._box2dData.body;\r\n\t}\r\n\t\r\n\tset body(body: TBox2dObjectBody) {\r\n\t\tthis._box2dData.body = body;\r\n\t}\r\n\t\r\n\tsetX(x: number): void {\r\n\t\tthis.x = x;\r\n\t\t\r\n\t\tconst body = this._box2dData.body;\r\n\t\tif (!body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst p = body.GetPosition();\r\n\t\tp.x = x * PixiToBox2d;\r\n\t\tbody.SetPosition(p);\r\n\t}\r\n\t\r\n\tsetY(y: number): void {\r\n\t\tthis.y = y;\r\n\t\t\r\n\t\tconst body = this._box2dData.body;\r\n\t\tif (!body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst p = body.GetPosition();\r\n\t\tp.y = y * PixiToBox2d;\r\n\t\tbody.SetPosition(p);\r\n\t}\r\n\t\r\n\tsetRotation(rotation: number): void {\r\n\t\tthis.rotation = rotation;\r\n\t\t\r\n\t\tconst body = this._box2dData.body;\r\n\t\tif (!body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tbody.SetAngle(rotation);\r\n\t}\r\n\t\r\n\treflect(): void {\r\n\t\tthis.setX(this.x);\r\n\t\tthis.setY(this.y);\r\n\t\tthis.setRotation(this.rotation);\r\n\t\tthis.addMask(this._box2dData.maskBits);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Adds the object with the specified \"category Bits\" to collision detection.\r\n\t */\r\n\taddMask(bits: number): void {\r\n\t\tthis._box2dData.maskBits |= bits;\r\n\t\t\r\n\t\tif (!this._box2dData.body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet list = this._box2dData.body.GetFixtureList();\r\n\t\t\r\n\t\twhile (list) {\r\n\t\t\tconst data = list.GetFilterData();\r\n\t\t\tdata.maskBits = this._box2dData.maskBits;\r\n\t\t\tlist.SetFilterData(data);\r\n\t\t\t\r\n\t\t\tlist = list.GetNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set to perform collision detection with all objects.\r\n\t */\r\n\taddAllMask(): void {\r\n\t\tthis._box2dData.maskBits = 65535;\r\n\t\t\r\n\t\tif (!this._box2dData.body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet list = this._box2dData.body.GetFixtureList();\r\n\t\t\r\n\t\twhile (list) {\r\n\t\t\tconst data = list.GetFilterData();\r\n\t\t\tdata.maskBits = 65535;\r\n\t\t\tlist.SetFilterData(data);\r\n\t\t\t\r\n\t\t\tlist = list.GetNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes the object with the specified \"category bit\" from collision detection.\r\n\t */\r\n\tremoveMask(bits: number): void {\r\n\t\tthis._box2dData.maskBits ^= this._box2dData.maskBits & bits;\r\n\t\t\r\n\t\tif (!this._box2dData.body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet list = this._box2dData.body.GetFixtureList();\r\n\t\t\r\n\t\twhile (list) {\r\n\t\t\tconst data = list.GetFilterData();\r\n\t\t\tdata.maskBits = this._box2dData.maskBits;\r\n\t\t\tlist.SetFilterData(data);\r\n\t\t\t\r\n\t\t\tlist = list.GetNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set not to perform collision detection with any object.\r\n\t */\r\n\tremoveAllMask(): void {\r\n\t\tthis._box2dData.maskBits = 0;\r\n\t\t\r\n\t\tif (!this._box2dData.body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet list = this._box2dData.body.GetFixtureList();\r\n\t\t\r\n\t\twhile (list) {\r\n\t\t\tconst data = list.GetFilterData();\r\n\t\t\tdata.maskBits = 0;\r\n\t\t\tlist.SetFilterData(data);\r\n\t\t\t\r\n\t\t\tlist = list.GetNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\ttoDynamic(): void {\r\n\t\tif (!this._box2dData.body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._box2dData.body.SetType(Body.b2_dynamicBody);\r\n\t}\r\n\t\r\n\ttoStatic(): void {\r\n\t\tif (!this._box2dData.body) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._box2dData.body.SetType(Body.b2_staticBody);\r\n\t}\r\n}\r\n\r\ndelete(Box2dObject.prototype.BeginContact);\r\ndelete(Box2dObject.prototype.EndContact);\r\ndelete(Box2dObject.prototype.PreSolve);\r\ndelete(Box2dObject.prototype.PostSolve);","import { Container } from 'pixi.js';\r\nimport { CircleShape } from './Box2dAlias';\r\nimport { Box2dObject, IBox2dObjectOption } from './Box2dObject';\r\nimport { PixiToBox2d } from './utils';\r\n\r\nexport class Circle extends Box2dObject {\r\n\tconstructor(radius: number, options: IBox2dObjectOption = {}) {\r\n\t\tsuper(options);\r\n\t\t\r\n\t\tconst fixtureDef = this.getFixtureDefs()[0];\r\n\t\tfixtureDef.shape = new CircleShape(radius * PixiToBox2d);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a \"Circle\" instance whose radius is the larger width or height of the \"PIXI.Container\" instance at that point.\r\n\t * Note that if you change the shape of the \"PIXI.Container\" instance after creating this method, the appearance and collision detection will not match.\r\n\t */\r\n\tstatic from(pixi: Container, options: IBox2dObjectOption = {}): Circle {\r\n\t\tconst b2d = new Circle(Math.max(pixi.width / 2, pixi.height/ 2), options);\r\n\t\t\r\n\t\tconst c = b2d.addChild(new Container());\r\n\t\tc.addChild(pixi);\r\n\t\t\r\n\t\tconst b = b2d.getLocalBounds();\r\n\t\tc.x = -b.x - pixi.width / 2;\r\n\t\tc.y = -b.y - pixi.height / 2;\r\n\t\t\r\n\t\treturn b2d;\r\n\t}\r\n}","import { Container } from 'pixi.js';\r\nimport { Vec2, PolygonShape } from './Box2dAlias';\r\nimport { Box2dObject, IBox2dObjectOption } from './Box2dObject';\r\nimport { PixiToBox2d }from './utils';\r\n\r\nexport class Rectangle extends Box2dObject {\r\n\tconstructor(width: number, height: number, options: IBox2dObjectOption = {}) {\r\n\t\tsuper(options);\r\n\t\t\r\n\t\twidth *= PixiToBox2d;\r\n\t\theight *= PixiToBox2d;\r\n\t\t\r\n\t\tconst fixtureDef = this.getFixtureDefs()[0];\r\n\t\tconst shape = new PolygonShape();\r\n\t\tshape.SetAsArray([\r\n\t\t\tnew Vec2(0, 0),\r\n\t\t\tnew Vec2(width, 0),\r\n\t\t\tnew Vec2(width, height),\r\n\t\t\tnew Vec2(0, height)\r\n\t\t]);\r\n\t\t\r\n\t\tfixtureDef.shape = shape;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a \"Rectangle\" instance that circumscribes the shape of the \"PIXI.Container\" instance at that point.\r\n\t * Note that if you change the shape of the \"PIXI.Container\" instance after creating this method, the appearance and collision detection will not match.\r\n\t */\r\n\tstatic from(pixi: Container, options: IBox2dObjectOption = {}): Rectangle {\r\n\t\tconst b2d = new Rectangle(pixi.width, pixi.height, options);\r\n\t\t\r\n\t\tconst c = b2d.addChild(new Container());\r\n\t\tc.addChild(pixi);\r\n\t\t\r\n\t\tconst b = b2d.getLocalBounds();\r\n\t\tc.x = -b.x;\r\n\t\tc.y = -b.y;\r\n\t\t\r\n\t\treturn b2d;\r\n\t}\r\n}","import { Vec2, PolygonShape } from './Box2dAlias';\r\nimport { Box2dObject, IBox2dObjectOption } from './Box2dObject';\r\n\r\nexport class Polygon extends Box2dObject {\r\n\tconstructor(vertices: Vec2[], options: IBox2dObjectOption = {}) {\r\n\t\tsuper(options);\r\n\t\t\r\n\t\tconst fixtureDef = this.getFixtureDefs()[0];\r\n\t\tconst shape = new PolygonShape();\r\n\t\tshape.SetAsArray(vertices);\r\n\t\t\r\n\t\tfixtureDef.shape = shape;\r\n\t}\r\n}","import { Vec2, PolygonShape } from './Box2dAlias';\r\nimport { Box2dObject, IBox2dObjectOption } from './Box2dObject';\r\nimport { PixiToBox2d } from './utils';\r\n\r\nexport class Edge extends Box2dObject {\r\n\tconstructor(to: Vec2, options: IBox2dObjectOption = {}) {\r\n\t\tsuper(options);\r\n\t\t\r\n\t\tconst fixtureDef = this.getFixtureDefs()[0];\r\n\t\tconst shape = new PolygonShape();\r\n\t\tshape.SetAsEdge(new Vec2(0, 0), new Vec2(to.x * PixiToBox2d, to.y * PixiToBox2d));\r\n\t\t\r\n\t\tfixtureDef.shape = shape;\r\n\t}\r\n}"],"names":["Common","Dynamics","Collision","Container"],"mappings":";;;;;;;;;;;;;;;;AAEA;;;IAGc,IAAI,GAAGA,qBAAM,CAAC,IAAI,CAAC,MAAM,CAAC;AAExC;;;IAGc,SAAS,GAAGC,uBAAQ,CAAC,WAAW,CAAC;AAE/C;;;IAGc,KAAK,GAAGA,uBAAQ,CAAC,OAAO,CAAC;AAEvC;;;IAGc,OAAO,GAAGA,uBAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC;AAEpD;;;IAGc,eAAe,GAAGA,uBAAQ,CAAC,iBAAiB,CAAC;AAE3D;;;IAGc,OAAO,GAAGA,uBAAQ,CAAC,SAAS,CAAC;AAE3C;;;IAGc,UAAU,GAAGA,uBAAQ,CAAC,YAAY,CAAC;AAEjD;;;IAGc,IAAI,GAAGA,uBAAQ,CAAC,MAAM,CAAC;AAErC;;;IAGc,WAAW,GAAGC,wBAAS,CAAC,MAAM,CAAC,aAAa,CAAC;AAE3D;;;IAGc,YAAY,GAAGA,wBAAS,CAAC,MAAM,CAAC,cAAc,CAAC;AAE7D;;;IAGc,SAAS,GAAGA,wBAAS,CAAC,MAAM,CAAC,WAAW,CAAC;;ACvDvD;;;AAGA,AAAO,MAAM,WAAW,GAAG,EAAE,CAAC;AAE9B;;;AAGA,AAAO,MAAM,WAAW,GAAG,CAAC,GAAG,WAAW,CAAC;;AC2B3C;;;AAGA,SAAS,mBAAmB,CAAC,OAAgB;IAC5C,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAClD,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAElD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;IACzD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;AAC1D,CAAC;AAED;;;AAGA,SAAS,iBAAiB,CAAC,OAAgB;IAC1C,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAClD,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAElD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;IACvD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;AACxD,CAAC;AAED;;;AAGA,SAAS,eAAe,CAAC,OAAgB;IACxC,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAClD,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAElD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;IACrD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AACtD,CAAC;AAED;;;AAGA,SAAS,gBAAgB,CAAC,OAAgB;IACzC,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAClD,MAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAElD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;IACtD,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;AACvD,CAAC;AAED;;;AAGA,MAAa,cAAe,SAAQC,iBAAS;IAG5C,YAAY,OAA8B;QACzC,KAAK,EAAE,CAAC;QAER,MAAM,QAAQ,GAAG,QAAO,OAAO,CAAC,QAAQ,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;QAC9E,MAAM,QAAQ,GAAG,QAAO,OAAO,CAAC,QAAQ,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC;QAChF,MAAM,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC;QAExC,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,UAAU,CAAC,CAAC;QAElE,IAAI,CAAC,UAAU,GAAG;YACjB,KAAK;YACL,QAAQ,EAAE,IAAI,eAAe,EAAE;YAC/B,OAAO,EAAE,IAAI;YACb,KAAK,EAAE,CAAC;YACR,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,EAAE;YACX,cAAc,EAAE,OAAO,CAAC,cAAc,IAAI,CAAC;YAC3C,cAAc,EAAE,OAAO,CAAC,cAAc,IAAI,CAAC;YAC3C,YAAY,EAAE,OAAO,CAAC,YAAY,IAAI,CAAC;YACvC,gBAAgB,EAAE,OAAO,CAAC,gBAAgB,IAAI,IAAI;YAClD,iBAAiB,EAAE,OAAO,CAAC,iBAAiB,IAAI,KAAK;SACrD,CAAC;QAEF,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE;YAChB,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;SAC3C,CAAC,CAAC;QAEH,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE;YAClB,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;SAC9C,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;QAC1C,IAAI,OAAO,CAAC,kBAAkB,EAAE;YAC/B,QAAQ,CAAC,YAAY,GAAG,mBAAmB,CAAC;SAC5C;QAED,IAAI,OAAO,CAAC,gBAAgB,EAAE;YAC7B,QAAQ,CAAC,UAAU,GAAG,iBAAiB,CAAC;SACxC;QAED,IAAI,OAAO,CAAC,cAAc,EAAE;YAC3B,QAAQ,CAAC,QAAQ,GAAG,eAAe,CAAC;SACpC;QAED,IAAI,OAAO,CAAC,eAAe,EAAE;YAC5B,QAAQ,CAAC,SAAS,GAAG,gBAAgB,CAAC;SACtC;QAED,KAAK,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QAEnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAA;KACxB;;;;;IAMD,YAAY,CAAE,UAA6B;QAC1C,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAEhD,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,GAAG,EAAE;YACT,OAAO,MAAM,CAAC;SACd;QAED,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;QAChC,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;QAClC,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC;QAC5C,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC;QAC9C,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC;QAC/C,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,IAAI,IAAI,GAAG,CAAC;QACjD,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QACnC,MAAM,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;QACpC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;QAE5B,MAAM,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;QAClC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QACzB,SAAS,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;QACpC,SAAS,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QAC5B,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;QAC9B,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC;QAEhE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAEnC,OAAO,MAAM,CAAC;KACd;IAEO,WAAW,CAAC,KAAa;QAChC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;YAC7B,OAAO;SACP;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;QAEpC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACvD,KAAK,CAAC,WAAW,EAAE,CAAC;QACpB,KAAK,CAAC,aAAa,EAAE,CAAC;QAEtB,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;QAExC,KAAK,MAAM,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;YACxC,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACvC,QAAO,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YACnB,IAAI,GAAG,CAAC,IAAI,EAAE;gBACb,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAC5B,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;aAChB;SACD;QACD,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,OAAO,EAAE,CAAC;KACf;IAED,OAAO;QACN,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;QAExC,MAAM,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACtD,MAAM,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACtD,MAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC;QAElD,IAAI,YAAY,KAAK,CAAC,EAAE;YACvB,KAAK,MAAM,CAAC,IAAI,OAAO,EAAE;gBACxB,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBAEvB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;oBACd,SAAS;iBACT;gBAED,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;gBAExC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,WAAW,GAAG,cAAc,CAAC;gBAClD,GAAG,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,GAAG,WAAW,GAAG,cAAc,CAAC,CAAC;gBACpD,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;aACnC;SACD;aAAM;YACN,MAAM,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC;YAC5D,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,gBAAgB,GAAG,YAAY,CAAC;YAE9D,KAAK,MAAM,CAAC,IAAI,OAAO,EAAE;gBACxB,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBAEvB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;oBACd,SAAS;iBACT;gBAED,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;gBAExC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,WAAW,GAAG,cAAc,CAAC;gBAClD,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC;gBAEnC,IAAI,CAAC,iBAAiB,IAAI,CAAC,GAAG,CAAC,EAAE;oBAChC,GAAG,CAAC,UAAU,GAAG,KAAK,CAAC;oBACvB,SAAS;iBACT;qBAAM;oBACN,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC;iBACnB;gBAED,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACjB,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,WAAW,GAAG,cAAc,IAAI,CAAC,CAAC;gBACxD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;gBACnB,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;aACnC;YAED,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YACvC,MAAM,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC5B,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;oBAChB,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACrC;gBAED,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACjB,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;SACpB;KACD;IAED,IAAI,KAAK;QACR,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;KAC7B;IAED,IAAI,KAAK,CAAC,KAAa;QACtB,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;KAC9B;IAED,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;KAC/B;IAED,IAAI,YAAY,CAAC,IAAa;QAC7B,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;KAC/B;IAED,IAAI,KAAK;QACR,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;KAC7B;IAED,QAAQ,CAAC,GAAgB;QACxB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;YACd,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC;YAChE,MAAM,WAAW,GAAG,GAAG,CAAC,cAAc,EAAE,CAAC;YAEzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5C,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;aACnC;YAED,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;YAEhB,IAAI,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,WAAW,EAAE,GAAG,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YACrE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SAC5B;QAED,GAAG,CAAC,OAAO,EAAE,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC;QAC3C,QAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;QAE7C,OAAO,GAAG,CAAC;KACX;IAED,WAAW,CAAC,GAAgB;QAC3B,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC;QAE3C,OAAO,GAAG,CAAC;KACX;IAED,IAAI,cAAc;QACjB,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;KACtC;IAED,IAAI,cAAc,CAAC,cAAsB;QACxC,IAAI,CAAC,UAAU,CAAC,cAAc,GAAG,cAAc,CAAC;KAChD;IAED,IAAI,cAAc;QACjB,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;KACtC;IAED,IAAI,cAAc,CAAC,cAAsB;QACxC,IAAI,CAAC,UAAU,CAAC,cAAc,GAAG,cAAc,CAAC;KAChD;IAED,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC;KACpC;IAED,IAAI,YAAY,CAAC,YAAoB;QACpC,IAAI,CAAC,UAAU,CAAC,YAAY,GAAG,YAAY,CAAC;KAC5C;CACD;;ACtSD;;;AAGA,SAAS,aAAa,CAAC,SAAS,GAAG,KAAK;IACvC,MAAM,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;IAC9B,SAAS,GAAG,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC;IAEpE,OAAO,OAAO,CAAC;AAChB,CAAC;AAED;;;AAGA,MAAM,cAAc,GAAY,aAAa,CAAC,IAAI,CAAC,CAAC;AAEpD;;;AAGA,MAAM,aAAa,GAAY,aAAa,CAAC,KAAK,CAAC,CAAC;AAEpD;;;AAGA,SAAS,gBAAgB,CAAC,UAA8B,EAAE,EAAE,IAAe;IAC1E,MAAM,UAAU,GAAG,IAAI,UAAU,EAAE,CAAC;IAEpC,UAAU,CAAC,OAAO,GAAG,QAAO,OAAO,CAAC,OAAO,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;IACjG,UAAU,CAAC,QAAQ,GAAG,QAAO,OAAO,CAAC,QAAQ,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;IACrG,UAAU,CAAC,WAAW,GAAG,QAAO,OAAO,CAAC,WAAW,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC;IACjH,UAAU,CAAC,MAAM,CAAC,YAAY,GAAG,QAAO,OAAO,CAAC,YAAY,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC;IACnI,UAAU,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAO,OAAO,CAAC,QAAQ,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC;IACnH,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC;IACzC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;IAE3B,OAAO,UAAU,CAAC;AACnB,CAAC;AAED;;;AAGA,MAAa,WAAY,SAAQA,iBAAS;IAkCzC,YAAY,UAA8B,EAAE;QAC3C,KAAK,EAAE,CAAC;QAER,MAAM,UAAU,GAAG,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,UAAU,GAAG;YACjB,EAAE,EAAE,WAAW,CAAC,GAAG,EAAE;YACrB,IAAI,EAAE,IAAI;YACV,OAAO,EAAE,OAAO,CAAC,QAAQ,GAAG,aAAa,GAAG,cAAc;YAC1D,WAAW,EAAE,CAAC,UAAU,CAAC;YACzB,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,QAAQ;SACpC,CAAC;KACF;;;;;;IApCD,YAAY,CAAE,QAAqB,KAAU;;;;;;IAO7C,UAAU,CAAE,QAAqB,KAAU;;;;;;;IAQ3C,QAAQ,CAAE,QAAqB,KAAU;;;;;;;IAQzC,SAAS,CAAE,QAAqB,KAAU;IAe1C,UAAU;QACT,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;KAC/B;IAED,cAAc;QACb,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;KACnC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;KAC1B;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;KAC5B;IAED,IAAI,IAAI,CAAC,IAAsB;QAC9B,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC;KAC5B;IAED,IAAI,CAAC,CAAS;QACb,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QAEX,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QAClC,IAAI,CAAC,IAAI,EAAE;YACV,OAAO;SACP;QAED,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,WAAW,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;KACpB;IAED,IAAI,CAAC,CAAS;QACb,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QAEX,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QAClC,IAAI,CAAC,IAAI,EAAE;YACV,OAAO;SACP;QAED,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,WAAW,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;KACpB;IAED,WAAW,CAAC,QAAgB;QAC3B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzB,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QAClC,IAAI,CAAC,IAAI,EAAE;YACV,OAAO;SACP;QAED,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;KACxB;IAED,OAAO;QACN,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAClB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;KACvC;;;;IAKD,OAAO,CAAC,IAAY;QACnB,IAAI,CAAC,UAAU,CAAC,QAAQ,IAAI,IAAI,CAAC;QAEjC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;YAC1B,OAAO;SACP;QAED,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAEjD,OAAO,IAAI,EAAE;YACZ,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;YACzC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAEzB,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;SACtB;KACD;;;;IAKD,UAAU;QACT,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,KAAK,CAAC;QAEjC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;YAC1B,OAAO;SACP;QAED,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAEjD,OAAO,IAAI,EAAE;YACZ,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAEzB,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;SACtB;KACD;;;;IAKD,UAAU,CAAC,IAAY;QACtB,IAAI,CAAC,UAAU,CAAC,QAAQ,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;QAE5D,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;YAC1B,OAAO;SACP;QAED,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAEjD,OAAO,IAAI,EAAE;YACZ,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;YACzC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAEzB,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;SACtB;KACD;;;;IAKD,aAAa;QACZ,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;QAE7B,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;YAC1B,OAAO;SACP;QAED,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAEjD,OAAO,IAAI,EAAE;YACZ,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAClB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAEzB,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;SACtB;KACD;IAED,SAAS;QACR,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;YAC1B,OAAO;SACP;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAClD;IAED,QAAQ;QACP,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;YAC1B,OAAO;SACP;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KACjD;;AA/Mc,eAAG,GAAG,CAAC,CAAC;AAkNxB,QAAO,WAAW,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AAC3C,QAAO,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AACzC,QAAO,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;AACvC,QAAO,WAAW,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;;MCjS3B,MAAO,SAAQ,WAAW;IACtC,YAAY,MAAc,EAAE,UAA8B,EAAE;QAC3D,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5C,UAAU,CAAC,KAAK,GAAG,IAAI,WAAW,CAAC,MAAM,GAAG,WAAW,CAAC,CAAC;KACzD;;;;;IAMD,OAAO,IAAI,CAAC,IAAe,EAAE,UAA8B,EAAE;QAC5D,MAAM,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,GAAE,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;QAE1E,MAAM,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAIA,iBAAS,EAAE,CAAC,CAAC;QACxC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAEjB,MAAM,CAAC,GAAG,GAAG,CAAC,cAAc,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAE7B,OAAO,GAAG,CAAC;KACX;CACD;;MCxBY,SAAU,SAAQ,WAAW;IACzC,YAAY,KAAa,EAAE,MAAc,EAAE,UAA8B,EAAE;QAC1E,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,KAAK,IAAI,WAAW,CAAC;QACrB,MAAM,IAAI,WAAW,CAAC;QAEtB,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5C,MAAM,KAAK,GAAG,IAAI,YAAY,EAAE,CAAC;QACjC,KAAK,CAAC,UAAU,CAAC;YAChB,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;YACd,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;YAClB,IAAI,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC;YACvB,IAAI,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC;SACnB,CAAC,CAAC;QAEH,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;KACzB;;;;;IAMD,OAAO,IAAI,CAAC,IAAe,EAAE,UAA8B,EAAE;QAC5D,MAAM,GAAG,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QAE5D,MAAM,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAIA,iBAAS,EAAE,CAAC,CAAC;QACxC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAEjB,MAAM,CAAC,GAAG,GAAG,CAAC,cAAc,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACX,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAEX,OAAO,GAAG,CAAC;KACX;CACD;;MCrCY,OAAQ,SAAQ,WAAW;IACvC,YAAY,QAAgB,EAAE,UAA8B,EAAE;QAC7D,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5C,MAAM,KAAK,GAAG,IAAI,YAAY,EAAE,CAAC;QACjC,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAE3B,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;KACzB;CACD;;MCTY,IAAK,SAAQ,WAAW;IACpC,YAAY,EAAQ,EAAE,UAA8B,EAAE;QACrD,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5C,MAAM,KAAK,GAAG,IAAI,YAAY,EAAE,CAAC;QACjC,KAAK,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,WAAW,EAAE,EAAE,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;QAElF,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;KACzB;CACD;;;;;;;;;;;;;;;;;"}